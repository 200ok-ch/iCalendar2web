* Rationale

Meetup is great to organise your local meetup. Meetup also has great
sharing and API options. They do support embeding the meetup group
together with the next meetup. However, there is no out-of-the-box
support to embed your schedule to another website.

This is a Ruby Sinatra project that solves this issue by accessing the
[[https://www.meetup.com/meetup_api/feeds/][Meetup calendar feeds API]]. It can render your events directly HTML
table or return JSON for you to work with. Hosting can be done on
Heroku to get you started. There is also a hosted SaaS version (see
below).

** Demo

As the abbot of the [[https://zen-temple.net/lambda-zen-temple/introduction/][Lambda Zen Temple]], I post the daily meditation
schedule and several other events to Meetup. However, I want that
schedule also to be seen on our website. You can see this as a demo
[[https://zen-temple.net/zen-temples/lambda-zen-temple/zen-meditation-schedule/][here]].

*** Plain

[[file:images/html_example.png]]

*** Integrated into a website

[[file:images/integrated_example.png]]

*** JSON Response

Request:
#+BEGIN_SRC restclient
GET http://localhost:9292/meetup/Zen-Meditation-Schweiz?filter=retreat&format=json
#+END_SRC

Results:
#+BEGIN_SRC js
[
  {
    "name": "One-Day-Retreat",
    "start_time": "2019-08-25T10:00:00.000+02:00",
    "end_time": "2019-08-25T17:00:00.000+02:00"
  },
  ...
]
#+END_SRC

** Use as a Service

meetup-calendar is generic in that it can render any public Meetup schedule.
Instead of installing meetup-calendar yourself, you can use this hosted
version:

[[https://meetup-calendar.herokuapp.com/meetup/YourMeetupGroupURL]]

With =YourMeetupGroupURL= being the Meetup Group URL, eg
"Zen-Meditation-Schweiz".

*** iFrame

If you want to embed it to your own website, use an iframe - similar to
Youtube:

#+BEGIN_SRC html
  <iframe width="800px" height="800px"
      src="https://meetup-calendar.herokuapp.com/meetup/Zen-Meditation-Schweiz"
      frameborder="0">
  </iframe>
#+END_SRC

*** Load via Ajax

You can also load the html via Ajax into your page. For example if you
want to show a loading spinner upfront. The required access-control
headers are set on this service, so no worries about CORS.

#+BEGIN_SRC javascript
  $.get("https://meetup-calendar.herokuapp.com/meetup/MyMeetupGroup", function(data) {
    $("#my-schedule").html(data);
  });
#+END_SRC

* Parameters

meetup-calendar takes the following parameters:

- =filter=: takes a RegExp to filter the name of the meetup
- =show_from_to=: when set, this changes the default table columns
  from
  |date|time|
  to
  |date from|date to|
- =limit=: set a limit of how often a specific meetup shall be repeated
  in the table, the default is 25. This flag is not supported for the
  =json= response.
- =format=: when set to =json=, it returns the results as JSON and not
  as an HTML table

** Examples

- =/meetup/MyMeetupGroup=

  - will show all meetups with the table columns
    |date|time|

- =/meetup/MyMeetupGroup?format=json=

  - will show all meetups rendered in a JSON list

- =/meetup/MyMeetupGroup?limit=5=

  - will show up to 5 meetups per category with the table columns
    |date|time|

- =/meetup/MyMeetupGroup?limit=5&filter=retreat=

  - will show up to 5 meetups that include 'retreat' in the title with
    the table columns
    |date|time|

- =/meetup/MyMeetupGroup?limit=5&filter=retreat&show_from_to=1=

  - will show up to 5 meetups that include 'retreat' in the title with
    the table columns
    | date from | date to |

* Deployment

** Heroku

Please refer to the documentation of Heroku to install

https://devcenter.heroku.com/articles/rack

* Running

Install Ruby (using [[https://github.com/rbenv/rbenv][rbenv]] in this example):

#+BEGIN_SRC shell
rbenv install
#+END_SRC

Install dependencies:

#+BEGIN_SRC shell
gem install bundler
bundle
#+END_SRC

Run the application:

#+BEGIN_SRC shell
rackup config.ru
#+END_SRC
